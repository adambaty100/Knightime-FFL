<div class="header">
    <h2>Transactions</h2>
    <p class="transaction-count">Total Transactions: {{ getTotalTransactions() }}</p>
</div>

<div class="transactions-container">
  <div class="filters" *ngIf="!isLoading">
    <div class="filter-group">
      <label for="member-filter">Filter by League Member:</label>
      <select id="member-filter" (change)="onMemberFilter($event)">
        <option value="">All Members</option>
        <option *ngFor="let member of leagueMembers" [value]="member.id">
          {{ member.name || member.leagueMember }}
        </option>
      </select>
    </div>

    <div class="filter-group">
      <label for="year-filter">Filter by Year:</label>
      <select id="year-filter" (change)="onYearFilter($event)">
        <option value="">All Years</option>
        <option *ngFor="let year of years" [value]="year">
          {{ year }}
        </option>
      </select>
    </div>

    <button 
      class="clear-btn" 
      (click)="clearFilters()"
      *ngIf="getActiveFilterCount() > 0">
      Clear Filters ({{ getActiveFilterCount() }})
    </button>
  </div>

  <div class="loading" *ngIf="isLoading">
    <p>Loading transactions...</p>
  </div>

  <div class="error" *ngIf="error && !isLoading">
    <p>{{ error }}</p>
  </div>

  <div class="transactions-table" *ngIf="!isLoading && !error">
    <table *ngIf="filteredTransactions.length > 0">
      <thead>
        <tr>
          <th>Year</th>
          <th>League Member</th>
          <th>Trades</th>
          <th>Acquisitions</th>
          <th>Drops</th>
          <th>Activations</th>
          <th>IR</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let transaction of filteredTransactions">
          <td>{{ transaction.year }}</td>
          <td>{{ transaction.leagueMemberName }}</td>
          <td class="transaction-count">{{ transaction.trades }}</td>
          <td class="transaction-count">{{ transaction.acquisitions }}</td>
          <td class="transaction-count">{{ transaction.drops }}</td>
          <td class="transaction-count">{{ transaction.activations }}</td>
          <td class="transaction-count">{{ transaction.ir }}</td>
        </tr>
      </tbody>
    </table>

    <div class="no-transactions" *ngIf="filteredTransactions.length === 0">
      <p>No transactions found matching the selected filters.</p>
    </div>
  </div>
</div>
